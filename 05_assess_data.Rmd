---
title: "05_data_assessment"
author: "Morten Gade"
date: "11/29/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
# packages
library(tidyverse, dplyr)

# load data
data <- read_csv("./data/folketinget_2009_2021_raw.csv")

# sample ~200 values across different years
set.seed(124)
samples <- data %>% group_by(Year) %>% sample_n(round(200/length(unique(data[["Year"]])))) %>% ungroup() %>% select(id, text, doc_id, Year)

# assign rater
samples$who <- ifelse(samples$doc_id %in% ((sample(samples$doc_id, nrow(samples)/2))), "Morten", "Gustav")

# write csv
write_csv(x = samples, file = paste0("./data/", nrow(samples), "_samples_", min(samples$Year), "-", max(samples$Year), ".csv"))

```

```{r}
###################################################### MORTEN ######################################################  

morten <- read_csv("./data/195_samples_2009-2021.csv") %>% filter(who == "Morten") %>% slice(1:3)
morten_ids <- morten$doc_id %>% sort()

assessment <- function(doc_id){
  split = readline(prompt = paste0("Is the text in ", doc_id, " split correctly? "))
  assignment = readline(prompt = paste0("Is the text in ", doc_id, " assigned correctly? "))
  row <- c(doc_id, split, assignment)
  ratings[nrow(ratings)+i,] <<- row
  i = i + 1
}

i = 1
ratings <<- setNames(data.frame(matrix(ncol = 3, nrow = 0)), c("doc_id", "split", "assignment"))
map(.f = assessment, .x = doc_ids)


# join by doc_id at the end

# i would like there to be an argument for df... 

```

```{r}
###################################################### GUSTAV ######################################################  

gustav <- read_csv("./data/195_samples_2009-2021.csv") %>% filter(who == "Gustav")


```

